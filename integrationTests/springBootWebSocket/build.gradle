apply plugin: 'org.gretty'
apply plugin: 'org.gretty.internal.integrationTests.IntegrationTestPlugin'

dependencies {
  implementation localGroovy()
  implementation 'org.webjars:sockjs-client:0.3.4-1'
  implementation 'org.webjars:stomp-websocket:2.3.3'
}

gretty {
  springBoot = true
  servletContainer = 'tomcat9'
  if (project.javaVersion.isJava9Compatible()) jvmArgs  "--add-opens", "java.base/java.lang=ALL-UNNAMED"
}

defineIntegrationTest()
testAll.dependsOn defineIntegrationTestAllContainers(['jetty9', 'jetty10', 'tomcat85', 'tomcat9'])
